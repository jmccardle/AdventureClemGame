// antigravity making items float to ceiling in workshop
(:event ANTIGRAVITY_OBJECTS
    :parameters (?e - entity ?h - receptacle ?c - ceiling ?r - room ?p - player)
    :precondition (and
        (room ?r workshop)
        (at ?e ?r)
        (at ?p ?r)
        (not (type ?h ceiling))
        (or
            (on ?e ?h)
            (and
                (in ?e ?h)
                (open ?h)
                )
            )
        (type ?c ceiling)
        )
    :effect (and
        (when
            (and
                (in ?e ?h)
                (open ?h)
                )
            (and
                (not (in ?e ?h))
                (on ?e ?c)
                )
            )
        (when
            (on ?e ?h)
            (and
                (not (on ?e ?h))
                (on ?e ?c)
                )
            )
        )
    )

// antigravity active in room, player starts floating
(:event ANTIGRAVPLAYERSTART
    :parameters (?r - room ?p - player)
    :precondition (and
        (room ?r workshop)
        (at ?p ?r)
        (not (floating ?p))
        )
    :effect (and
        (floating ?p)
        )
    )

(:event ANTIGRAVPLAYERSTART
    :parameters (?r - room ?p - player)
    :precondition (and
        (room ?r workshop)
        (at ?p ?r)
        )
    :effect (and
        (floating ?p)
        )
    )


// antigravity not active in room, player stops floating
(:event ANTIGRAVPLAYERSTOP
    :parameters (?r - room ?p - player)
    :precondition (and
        (not (room ?r workshop))
        (at ?p ?r)
        (floating ?p)
        )
    :effect (and
        (not (floating ?p))
        )
    )

// entering outhouse teleports player to kitchen
(:event OUTHOUSETELEPORT
    :parameters (?r - room ?p - player ?i - inventory)
    :precondition (and
        (room ?r outhouse)
        (at ?p ?r)
        )
    :effect (and
        (at ?p kitchen1)
        (not (at ?p ?r))
        (forall (?e - takeable)
            (when
                (in ?e ?i)
                (and
                    (at ?e kitchen1)
                    (not (at ?e ?r))
                )
            )
        )
    )
)

(:event OUTHOUSETELEPORT
    :parameters (?r - room ?p - player)
    :precondition (and
        (room ?r outhouse)
        (at ?p ?r)
        )
    :effect (and
        (at ?p kitchen1)
        (not (at ?p ?r))
        (forall (?e - takeable)
            (when
                (in ?e inventory)
                (and
                    (at ?e kitchen1)
                    (not (at ?e ?r))
                )
            )
        )
    )
)


 (:action GO
    :parameters (?c ?d - room ?p - player ?i - inventory)
    :precondition (and
        (at ?p ?c)
        (not (at ?p ?d))
        (exit ?c ?d)
        )
    :effect (and
        (at ?p ?d)
        (not (at ?p ?c))
        (forall (?e - takeable)
            (when
                (in ?e ?i)
                (and
                    (at ?e ?d)
                    (not (at ?e ?c))
                )
            )
        )
    )
)
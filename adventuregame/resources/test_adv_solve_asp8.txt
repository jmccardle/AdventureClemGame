turn_limit(50).
turn(0).
{ turn(TURN+1) } 1 :- turn(TURN), not turn_limit(TURN).
post_turn(TURN+1) :- turn(TURN), not turn(TURN+1).

type(kitchen1floor1,floor).
type(pantry1floor1,floor).
type(hallway1floor1,floor).
type(broomcloset1floor1,floor).
type(bedroom1floor1,floor).
type(storage1floor1,floor).
type(readingroom1floor1,floor).
type(workshop1floor1,floor).
type(workshop1ceiling1,ceiling).
type(cellar1floor1,floor).
type(conservatory1floor1,floor).
type(garden1floor1,floor).
type(outhouse1floor1,floor).
type(player1,player).
type(table1,table).
type(sidetable1,sidetable).
type(counter1,counter).
type(icebox1,icebox).
type(cupboard1,cupboard).
type(wardrobe1,wardrobe).
type(shelf1,shelf).
type(chair1,chair).
type(bed1,bed).
type(couch1,couch).
type(broom1,broom).
type(mop1,mop).
type(sandwich1,sandwich).
type(apple1,apple).
type(banana1,banana).
type(orange1,orange).
type(peach1,peach).
type(plate1,plate).
type(book1,book).
type(pillow1,pillow).
type(toad1,toad).
type(greenbeetle1,greenbeetle).
type(redbeetle1,redbeetle).
type(eyeofnewt1,eyeofnewt).
type(plinklecrystal1,plinklecrystal).
type(plonklecrystal1,plonklecrystal).
type(plunklecrystal1,plunklecrystal).
type(spider1,spider).
type(spiderweb1,spiderweb).
type(spideregg1,spideregg).
type(lilyofthevalley1,lilyofthevalley).
type(nightshade1,nightshade).
type(pricklypear1,pricklypear).
type(waterbucket1,waterbucket).
type(water1,water).
type(plasmbucket1,plasmbucket).
type(ectoplasm1,ectoplasm).
type(cauldron1,cauldron).
type(ladle1,ladle).
type(whisk1,whisk).
type(spoon1,spoon).
type(borpulus1,borpulus).
type(firewand1,firewand).
type(icewand1,icewand).
type(fairywand1,fairywand).
type(zulpowand1,zulpowand).
type(liquid1,liquid).
type(potion1,potion).
type(potionrecipe1,potionrecipe).

room(kitchen1,kitchen).
room(pantry1,pantry).
room(hallway1,hallway).
room(broomcloset1,broomcloset).
room(bedroom1,bedroom).
room(storage1,storage).
room(readingroom1,readingroom).
room(workshop1,workshop).
room(cellar1,cellar).
room(conservatory1,conservatory).
room(garden1,garden).
room(outhouse1,outhouse).

at_t(0,kitchen1floor1,kitchen1).
at_t(0,pantry1floor1,pantry1).
at_t(0,hallway1floor1,hallway1).
at_t(0,broomcloset1floor1,broomcloset1).
at_t(0,bedroom1floor1,bedroom1).
at_t(0,storage1floor1,storage1).
at_t(0,readingroom1floor1,readingroom1).
at_t(0,workshop1floor1,workshop1).
at_t(0,workshop1ceiling1,workshop1).
at_t(0,cellar1floor1,cellar1).
at_t(0,conservatory1floor1,conservatory1).
at_t(0,garden1floor1,garden1).
at_t(0,outhouse1floor1,outhouse1).
at_t(0,player1,bedroom1).
at_t(0,potionrecipe1,bedroom1).
at_t(0,table1,readingroom1).
at_t(0,sidetable1,readingroom1).
at_t(0,counter1,kitchen1).
at_t(0,icebox1,pantry1).
at_t(0,cupboard1,kitchen1).
at_t(0,wardrobe1,bedroom1).
at_t(0,shelf1,readingroom1).
at_t(0,chair1,readingroom1).
at_t(0,bed1,bedroom1).
at_t(0,couch1,readingroom1).
at_t(0,broom1,broomcloset1).
at_t(0,mop1,broomcloset1).
at_t(0,sandwich1,pantry1).
at_t(0,apple1,pantry1).
at_t(0,banana1,pantry1).
at_t(0,orange1,pantry1).
at_t(0,peach1,pantry1).
at_t(0,plate1,kitchen1).
at_t(0,book1,bedroom1).
at_t(0,pillow1,bedroom1).
at_t(0,toad1,pantry1).
at_t(0,greenbeetle1,cellar1).
at_t(0,redbeetle1,cellar1).
at_t(0,eyeofnewt1,pantry1).
at_t(0,plinklecrystal1,storage1).
at_t(0,plonklecrystal1,storage1).
at_t(0,plunklecrystal1,storage1).
at_t(0,spider1,cellar1).
at_t(0,spiderweb1,storage1).
at_t(0,spideregg1,cellar1).
at_t(0,lilyofthevalley1,garden1).
at_t(0,nightshade1,garden1).
at_t(0,pricklypear1,conservatory1).
at_t(0,waterbucket1,garden1).
at_t(0,plasmbucket1,garden1).
at_t(0,cauldron1,kitchen1).
at_t(0,ladle1,storage1).
at_t(0,whisk1,storage1).
at_t(0,spoon1,storage1).
at_t(0,borpulus1,storage1).
at_t(0,firewand1,workshop1).
at_t(0,icewand1,workshop1).
at_t(0,fairywand1,workshop1).
at_t(0,zulpowand1,workshop1).

support(kitchen1floor1).
support(pantry1floor1).
support(hallway1floor1).
support(broomcloset1floor1).
support(bedroom1floor1).
support(storage1floor1).
support(readingroom1floor1).
support(workshop1floor1).
support(workshop1ceiling1).
support(cellar1floor1).
support(conservatory1floor1).
support(garden1floor1).
support(outhouse1floor1).
support(table1).
support(sidetable1).
support(counter1).
support(shelf1).
support(chair1).
support(bed1).
support(couch1).

on_t(0,zulpowand1,workshop1ceiling1).
on_t(0,fairywand1,workshop1ceiling1).
on_t(0,icewand1,workshop1ceiling1).
on_t(0,firewand1,workshop1ceiling1).
on_t(0,borpulus1,storage1floor1).
on_t(0,spoon1,storage1floor1).
on_t(0,whisk1,storage1floor1).
on_t(0,ladle1,storage1floor1).
on_t(0,plasmbucket1,garden1floor1).
on_t(0,waterbucket1,garden1floor1).
on_t(0,pricklypear1,conservatory1floor1).
on_t(0,nightshade1,garden1floor1).
on_t(0,lilyofthevalley1,garden1floor1).
on_t(0,spideregg1,cellar1floor1).
on_t(0,spiderweb1,storage1floor1).
on_t(0,spider1,cellar1floor1).
on_t(0,plunklecrystal1,storage1floor1).
on_t(0,plonklecrystal1,storage1floor1).
on_t(0,plinklecrystal1,storage1floor1).
on_t(0,eyeofnewt1,pantry1floor1).
on_t(0,redbeetle1,cellar1floor1).
on_t(0,greenbeetle1,cellar1floor1).
on_t(0,pillow1,bedroom1floor1).
on_t(0,book1,bed1).
on_t(0,plate1,kitchen1floor1).
on_t(0,mop1,broomcloset1floor1).
on_t(0,broom1,broomcloset1floor1).

container(icebox1).
container(cupboard1).
container(wardrobe1).
container(cauldron1).

in_t(0,toad1,icebox1).
in_t(0,peach1,icebox1).
in_t(0,orange1,icebox1).
in_t(0,banana1,icebox1).
in_t(0,apple1,icebox1).
in_t(0,sandwich1,icebox1).

exit(kitchen1,pantry1).
exit(kitchen1,conservatory1).
exit(pantry1,kitchen1).
exit(hallway1,readingroom1).
exit(hallway1,broomcloset1).
exit(hallway1,bedroom1).
exit(hallway1,workshop1).
exit(broomcloset1,hallway1).
exit(bedroom1,readingroom1).
exit(storage1,hallway1).
exit(storage1,cellar1).
exit(readingroom1,conservatory1).
exit(readingroom1,garden1).
exit(workshop1,kitchen1).
exit(workshop1,bedroom1).
exit(cellar1,hallway1).
exit(conservatory1,hallway1).
exit(garden1,storage1).
exit(garden1,outhouse1).
exit(outhouse1,garden1).

receptacle(table1).
receptacle(sidetable1).
receptacle(counter1).
receptacle(icebox1).
receptacle(cupboard1).
receptacle(wardrobe1).
receptacle(shelf1).
receptacle(chair1).
receptacle(bed1).
receptacle(couch1).
receptacle(cauldron1).

openable(icebox1).
openable(cupboard1).
openable(wardrobe1).

closed_t(0,icebox1).
closed_t(0,cupboard1).
closed_t(0,wardrobe1).

takeable(broom1).
takeable(mop1).
takeable(sandwich1).
takeable(apple1).
takeable(banana1).
takeable(orange1).
takeable(peach1).
takeable(plate1).
takeable(book1).
takeable(pillow1).
takeable(toad1).
takeable(greenbeetle1).
takeable(redbeetle1).
takeable(eyeofnewt1).
takeable(plinklecrystal1).
takeable(plonklecrystal1).
takeable(plunklecrystal1).
takeable(spider1).
takeable(spiderweb1).
takeable(spideregg1).
takeable(lilyofthevalley1).
takeable(nightshade1).
takeable(pricklypear1).
takeable(waterbucket1).
takeable(plasmbucket1).
takeable(ladle1).
takeable(whisk1).
takeable(spoon1).
takeable(borpulus1).
takeable(firewand1).
takeable(icewand1).
takeable(fairywand1).
takeable(zulpowand1).

movable(broom1).
movable(mop1).
movable(sandwich1).
movable(apple1).
movable(banana1).
movable(orange1).
movable(peach1).
movable(plate1).
movable(book1).
movable(pillow1).
movable(toad1).
movable(greenbeetle1).
movable(redbeetle1).
movable(eyeofnewt1).
movable(plinklecrystal1).
movable(plonklecrystal1).
movable(plunklecrystal1).
movable(spider1).
movable(spiderweb1).
movable(spideregg1).
movable(lilyofthevalley1).
movable(nightshade1).
movable(pricklypear1).
movable(waterbucket1).
movable(plasmbucket1).
movable(ladle1).
movable(whisk1).
movable(spoon1).
movable(borpulus1).
movable(firewand1).
movable(icewand1).
movable(fairywand1).
movable(zulpowand1).

needs_support(broom1).
needs_support(mop1).
needs_support(sandwich1).
needs_support(apple1).
needs_support(banana1).
needs_support(orange1).
needs_support(peach1).
needs_support(plate1).
needs_support(book1).
needs_support(pillow1).
needs_support(toad1).
needs_support(greenbeetle1).
needs_support(redbeetle1).
needs_support(eyeofnewt1).
needs_support(plinklecrystal1).
needs_support(plonklecrystal1).
needs_support(plunklecrystal1).
needs_support(spider1).
needs_support(spiderweb1).
needs_support(spideregg1).
needs_support(lilyofthevalley1).
needs_support(nightshade1).
needs_support(pricklypear1).
needs_support(waterbucket1).
needs_support(water1).
needs_support(plasmbucket1).
needs_support(ectoplasm1).
needs_support(ladle1).
needs_support(whisk1).
needs_support(spoon1).
needs_support(borpulus1).
needs_support(firewand1).
needs_support(icewand1).
needs_support(fairywand1).
needs_support(zulpowand1).

ingredient(sandwich1).
ingredient(apple1).
ingredient(banana1).
ingredient(orange1).
ingredient(peach1).
ingredient(greenbeetle1).
ingredient(redbeetle1).
ingredient(eyeofnewt1).
ingredient(plinklecrystal1).
ingredient(plonklecrystal1).
ingredient(plunklecrystal1).
ingredient(spider1).
ingredient(spiderweb1).
ingredient(spideregg1).
ingredient(lilyofthevalley1).
ingredient(nightshade1).
ingredient(pricklypear1).
ingredient(waterbucket1).
ingredient(water1).
ingredient(plasmbucket1).
ingredient(ectoplasm1).

bucket(waterbucket1).
bucket(plasmbucket1).

tool(ladle1).
tool(whisk1).
tool(spoon1).
tool(borpulus1).
tool(firewand1).
tool(icewand1).
tool(fairywand1).
tool(zulpowand1).

readable(potionrecipe1).

event_t(TURN,potion_step_1,ROOM) :- turn(TURN), room(ROOM,_), at_t(TURN,water1,ROOM), at_t(TURN,cauldron1,ROOM),in_t(TURN,water1,cauldron1), borpulusstirred_t(TURN,water1).
% type(liquid1,liquid), at_t(TURN,liquid1,ROOM), in_t(TURN,liquid1,cauldron1), accessible_t(TURN,liquid1) :- event_t(TURN,potion_step_1,ROOM).
at_t(TURN,liquid1,ROOM) :- event_t(TURN,potion_step_1,ROOM).
in_t(TURN,liquid1,cauldron1) :- event_t(TURN,potion_step_1,ROOM).
accessible_t(TURN,liquid1) :- event_t(TURN,potion_step_1,ROOM).

%**%
at_t(TURN+1,liquid1,ROOM) :- at_t(TURN,liquid1,ROOM), not event_t(TURN,potion_step_2,ROOM), turn(TURN), room(ROOM,_).
in_t(TURN+1,liquid1,cauldron1) :- in_t(TURN,liquid1,cauldron1), not event_t(TURN,potion_step_2,ROOM), turn(TURN), room(ROOM,_).
accessible_t(TURN+1,liquid1) :- accessible_t(TURN,liquid1), not event_t(TURN,potion_step_2,ROOM), turn(TURN), room(ROOM,_).

at_t(TURN+1,water1,ROOM) :- turn(TURN), at_t(TURN,water1,ROOM), not event_t(TURN,potion_step_1,ROOM), room(ROOM,_).
in_t(TURN+1,water1,cauldron1) :- turn(TURN), in_t(TURN,water1,cauldron1), not event_t(TURN,potion_step_1,ROOM), room(ROOM,_).
accessible_t(TURN+1,water1) :- turn(TURN), accessible_t(TURN,water1), not event_t(TURN,potion_step_1,ROOM), room(ROOM,_).
borpulusstirred_t(TURN+1,water1) :- turn(TURN), borpulusstirred_t(TURN,water1), not event_t(TURN,potion_step_1,ROOM), room(ROOM,_).


%**%
event_t(TURN,potion_step_2,ROOM) :- turn(TURN), room(ROOM,_), at_t(TURN,eyeofnewt1,ROOM), at_t(TURN,cauldron1,ROOM),in_t(TURN,liquid1,cauldron1), in_t(TURN,eyeofnewt1,cauldron1).

% type(liquid2,liquid); at_t(TURN,liquid2,ROOM); in_t(TURN,liquid2,cauldron1); accessible_t(TURN,liquid2) :- event_t(TURN,potion_step_2,ROOM).
% at_t(TURN,liquid2,ROOM), in_t(TURN,liquid2,cauldron1), accessible_t(TURN,liquid2) :- event_t(TURN,potion_step_2,ROOM).

type(liquid2,liquid) :- event_t(TURN,potion_step_2,ROOM).
at_t(TURN,liquid2,ROOM) :- event_t(TURN,potion_step_2,ROOM).
in_t(TURN,liquid2,cauldron1) :- event_t(TURN,potion_step_2,ROOM).

at_t(TURN+1,liquid2,ROOM) :- at_t(TURN,liquid2,ROOM), not event_t(TURN,potion_step_3,ROOM), turn(TURN), room(ROOM,_).
in_t(TURN+1,liquid2,cauldron1) :- in_t(TURN,liquid2,cauldron1), not event_t(TURN,potion_step_3,ROOM), turn(TURN), room(ROOM,_).
accessible_t(TURN+1,liquid2) :- accessible_t(TURN,liquid2), not event_t(TURN,potion_step_3,ROOM), turn(TURN), room(ROOM,_).
at_t(TURN+1,liquid1,ROOM) :- turn(TURN), at_t(TURN,liquid1,ROOM), not event_t(TURN,potion_step_2,ROOM), room(ROOM,_).
in_t(TURN+1,liquid1,cauldron1) :- turn(TURN), in_t(TURN,liquid1,cauldron1), not event_t(TURN,potion_step_2,ROOM), room(ROOM,_).
accessible_t(TURN+1,liquid1) :- turn(TURN), accessible_t(TURN,liquid1), not event_t(TURN,potion_step_2,ROOM), room(ROOM,_).
at_t(TURN+1,eyeofnewt1,ROOM) :- turn(TURN), at_t(TURN,eyeofnewt1,ROOM), not event_t(TURN,potion_step_2,ROOM), room(ROOM,_).
in_t(TURN+1,eyeofnewt1,cauldron1) :- turn(TURN), in_t(TURN,eyeofnewt1,cauldron1), not event_t(TURN,potion_step_2,ROOM), room(ROOM,_).


event_t(TURN,potion_step_3,ROOM) :- turn(TURN), room(ROOM,_), at_t(TURN,liquid2,ROOM), at_t(TURN,cauldron1,ROOM),in_t(TURN,liquid2,cauldron1), zulponated_t(TURN,cauldron1).

% type(liquid3,liquid), at_t(TURN,liquid3,ROOM), in_t(TURN,liquid3,cauldron1), accessible_t(TURN,liquid3) :- event_t(TURN,potion_step_3,ROOM).
type(liquid3,liquid) :- event_t(TURN,potion_step_3,ROOM).
at_t(TURN,liquid3,ROOM) :- event_t(TURN,potion_step_3,ROOM).
in_t(TURN,liquid3,cauldron1) :- event_t(TURN,potion_step_3,ROOM).
accessible_t(TURN,liquid3) :- event_t(TURN,potion_step_3,ROOM).

at_t(TURN+1,liquid3,ROOM) :- at_t(TURN,liquid3,ROOM), not event_t(TURN,potion_step_4,ROOM), turn(TURN), room(ROOM,_).
in_t(TURN+1,liquid3,cauldron1) :- in_t(TURN,liquid3,cauldron1), not event_t(TURN,potion_step_4,ROOM), turn(TURN), room(ROOM,_).
accessible_t(TURN+1,liquid3) :- accessible_t(TURN,liquid3), not event_t(TURN,potion_step_4,ROOM), turn(TURN), room(ROOM,_).
at_t(TURN+1,liquid2,ROOM) :- turn(TURN), at_t(TURN,liquid2,ROOM), not event_t(TURN,potion_step_3,ROOM), room(ROOM,_).
in_t(TURN+1,liquid2,cauldron1) :- turn(TURN), in_t(TURN,liquid2,cauldron1), not event_t(TURN,potion_step_3,ROOM), room(ROOM,_).
accessible_t(TURN+1,liquid2) :- turn(TURN), accessible_t(TURN,liquid2), not event_t(TURN,potion_step_3,ROOM), room(ROOM,_).


event_t(TURN,potion_step_4,ROOM) :- turn(TURN), room(ROOM,_), at_t(TURN,banana1,ROOM), at_t(TURN,cauldron1,ROOM),in_t(TURN,liquid3,cauldron1), in_t(TURN,banana1,cauldron1).

% type(liquid4,liquid), at_t(TURN,liquid4,ROOM), in_t(TURN,liquid4,cauldron1), accessible_t(TURN,liquid4) :- event_t(TURN,potion_step_4,ROOM).
type(liquid4,liquid) :- event_t(TURN,potion_step_4,ROOM).
at_t(TURN,liquid4,ROOM) :- event_t(TURN,potion_step_4,ROOM).
in_t(TURN,liquid4,cauldron1) :- event_t(TURN,potion_step_4,ROOM).
accessible_t(TURN,liquid4) :- event_t(TURN,potion_step_4,ROOM).

at_t(TURN+1,liquid4,ROOM) :- at_t(TURN,liquid4,ROOM), not event_t(TURN,potion_step_5,ROOM), turn(TURN), room(ROOM,_).
in_t(TURN+1,liquid4,cauldron1) :- in_t(TURN,liquid4,cauldron1), not event_t(TURN,potion_step_5,ROOM), turn(TURN), room(ROOM,_).
accessible_t(TURN+1,liquid4) :- accessible_t(TURN,liquid4), not event_t(TURN,potion_step_5,ROOM), turn(TURN), room(ROOM,_).
at_t(TURN+1,liquid3,ROOM) :- turn(TURN), at_t(TURN,liquid3,ROOM), not event_t(TURN,potion_step_4,ROOM), room(ROOM,_).
in_t(TURN+1,liquid3,cauldron1) :- turn(TURN), in_t(TURN,liquid3,cauldron1), not event_t(TURN,potion_step_4,ROOM), room(ROOM,_).
accessible_t(TURN+1,liquid3) :- turn(TURN), accessible_t(TURN,liquid3), not event_t(TURN,potion_step_4,ROOM), room(ROOM,_).
at_t(TURN+1,banana1,ROOM) :- turn(TURN), at_t(TURN,banana1,ROOM), not event_t(TURN,potion_step_4,ROOM), room(ROOM,_).
in_t(TURN+1,banana1,cauldron1) :- turn(TURN), in_t(TURN,banana1,cauldron1), not event_t(TURN,potion_step_4,ROOM), room(ROOM,_).


event_t(TURN,potion_step_5,ROOM) :- turn(TURN), room(ROOM,_), at_t(TURN,peach1,ROOM), at_t(TURN,cauldron1,ROOM),in_t(TURN,liquid4,cauldron1), in_t(TURN,peach1,cauldron1).

% type(potion1,potion), at_t(TURN,potion1,ROOM), in_t(TURN,potion1,cauldron1), accessible_t(TURN,potion1) :- event_t(TURN,potion_step_5,ROOM).
type(potion1,potion) :- event_t(TURN,potion_step_5,ROOM).
at_t(TURN,potion1,ROOM) :- event_t(TURN,potion_step_5,ROOM).
in_t(TURN,potion1,cauldron1) :- event_t(TURN,potion_step_5,ROOM).
accessible_t(TURN,potion1) :- event_t(TURN,potion_step_5,ROOM).

at_t(TURN+1,potion1,ROOM) :- at_t(TURN,potion1,ROOM), turn(TURN), room(ROOM,_).
in_t(TURN+1,potion1,cauldron1) :- in_t(TURN,potion1,cauldron1), turn(TURN), room(ROOM,_).
accessible_t(TURN+1,potion1) :- accessible_t(TURN,potion1), turn(TURN), room(ROOM,_).
at_t(TURN+1,liquid4,ROOM) :- turn(TURN), at_t(TURN,liquid4,ROOM), not event_t(TURN,potion_step_5,ROOM), room(ROOM,_).
in_t(TURN+1,liquid4,cauldron1) :- turn(TURN), in_t(TURN,liquid4,cauldron1), not event_t(TURN,potion_step_5,ROOM), room(ROOM,_).
accessible_t(TURN+1,liquid4) :- turn(TURN), accessible_t(TURN,liquid4), not event_t(TURN,potion_step_5,ROOM), room(ROOM,_).
at_t(TURN+1,peach1,ROOM) :- turn(TURN), at_t(TURN,peach1,ROOM), not event_t(TURN,potion_step_5,ROOM), room(ROOM,_).
in_t(TURN+1,peach1,cauldron1) :- turn(TURN), in_t(TURN,peach1,cauldron1), not event_t(TURN,potion_step_5,ROOM), room(ROOM,_).


{ action_t(TURN,open,THING):at_t(TURN,THING,ROOM),closed_t(TURN,THING) } 1 :- turn(TURN), at_t(TURN,player1,ROOM), not turn_limit(TURN).
open_t(TURN+1,THING) :- action_t(TURN,open,THING).
open_t(TURN+1,THING) :- turn(TURN), open_t(TURN,THING), not action_t(TURN,close,THING).

{ action_t(TURN,close,THING):at_t(TURN,THING,ROOM),open_t(TURN,THING) } 1 :- turn(TURN), at_t(TURN,player1,ROOM), not turn_limit(TURN).
closed_t(TURN+1,THING) :- action_t(TURN,close,THING).
closed_t(TURN+1,THING) :- turn(TURN), closed_t(TURN,THING), not action_t(TURN,open,THING).

{ action_t(TURN,take,THING):at_t(TURN,THING,ROOM),takeable(THING),in_t(TURN,THING,CONTAINER),open_t(TURN,CONTAINER),at_t(TURN,player1,ROOM);action_t(TURN,take,THING):at_t(TURN,THING,ROOM),takeable(THING),on_t(TURN,THING,SUPPORT),support(SUPPORT),at_t(TURN,player1,ROOM) } 1 :- turn(TURN), at_t(TURN,player1,ROOM), not turn_limit(TURN).
in_t(TURN+1,THING,inventory) :- action_t(TURN,take,THING).
in_t(TURN+1,THING,TARGET) :- turn(TURN), in_t(TURN,THING,TARGET), not action_t(TURN,take,THING), TARGET != inventory.
on_t(TURN+1,THING,TARGET) :- turn(TURN), on_t(TURN,THING,TARGET), not action_t(TURN,take,THING).

% { action_t(TURN,put,THING,TARGET):at_t(TURN,THING,ROOM),at_t(TURN,player1,ROOM),at_t(TURN,TARGET,ROOM),at_t(TURN,SOURCE,ROOM),movable(THING),container(SOURCE),in_t(TURN,THING,SOURCE),open_t(TURN,SOURCE),container(TARGET),open_t(TURN,TARGET);action_t(TURN,put,THING,TARGET):at_t(TURN,THING,ROOM),at_t(TURN,player1,ROOM),at_t(TURN,TARGET,ROOM),at_t(TURN,SOURCE,ROOM),movable(THING),container(SOURCE),in_t(TURN,THING,SOURCE),open_t(TURN,SOURCE),support(TARGET);action_t(TURN,put,THING,TARGET):at_t(TURN,THING,ROOM),at_t(TURN,player1,ROOM),at_t(TURN,TARGET,ROOM),support(TARGET),movable(THING),on_t(TURN,THING,SOURCE),support(SOURCE);action_t(TURN,put,THING,TARGET):at_t(TURN,THING,ROOM),at_t(TURN,player1,ROOM),at_t(TURN,TARGET,ROOM),movable(THING),in_t(TURN,THING,inventory),container(TARGET),open_t(TURN,TARGET);action_t(TURN,put,THING,TARGET):at_t(TURN,THING,ROOM),at_t(TURN,player1,ROOM),at_t(TURN,TARGET,ROOM),movable(THING),in_t(TURN,THING,inventory),support(TARGET) } 1 :- turn(TURN), at_t(TURN,player1,ROOM), not turn_limit(TURN).
{ action_t(TURN,put,THING,TARGET):at_t(TURN,THING,ROOM),at_t(TURN,player1,ROOM),at_t(TURN,TARGET,ROOM),at_t(TURN,SOURCE,ROOM),movable(THING),container(SOURCE),in_t(TURN,THING,SOURCE),open_t(TURN,SOURCE),container(TARGET),open_t(TURN,TARGET);
action_t(TURN,put,THING,TARGET):at_t(TURN,THING,ROOM),at_t(TURN,player1,ROOM),at_t(TURN,TARGET,ROOM),at_t(TURN,SOURCE,ROOM),movable(THING),container(SOURCE),in_t(TURN,THING,SOURCE),open_t(TURN,SOURCE),container(TARGET),not openable(TARGET);
action_t(TURN,put,THING,TARGET):at_t(TURN,THING,ROOM),at_t(TURN,player1,ROOM),at_t(TURN,TARGET,ROOM),at_t(TURN,SOURCE,ROOM),movable(THING),container(SOURCE),in_t(TURN,THING,SOURCE),not openable(SOURCE),container(TARGET),open_t(TURN,TARGET);
action_t(TURN,put,THING,TARGET):at_t(TURN,THING,ROOM),at_t(TURN,player1,ROOM),at_t(TURN,TARGET,ROOM),at_t(TURN,SOURCE,ROOM),movable(THING),container(SOURCE),in_t(TURN,THING,SOURCE),not openable(SOURCE),container(TARGET),not openable(TARGET);
action_t(TURN,put,THING,TARGET):at_t(TURN,THING,ROOM),at_t(TURN,player1,ROOM),at_t(TURN,TARGET,ROOM),at_t(TURN,SOURCE,ROOM),movable(THING),container(SOURCE),in_t(TURN,THING,SOURCE),open_t(TURN,SOURCE),support(TARGET);
action_t(TURN,put,THING,TARGET):at_t(TURN,THING,ROOM),at_t(TURN,player1,ROOM),at_t(TURN,TARGET,ROOM),at_t(TURN,SOURCE,ROOM),movable(THING),container(SOURCE),in_t(TURN,THING,SOURCE),not openable(SOURCE),support(TARGET);
action_t(TURN,put,THING,TARGET):at_t(TURN,THING,ROOM),at_t(TURN,player1,ROOM),at_t(TURN,TARGET,ROOM),support(TARGET),movable(THING),on_t(TURN,THING,SOURCE),support(SOURCE);
action_t(TURN,put,THING,TARGET):at_t(TURN,THING,ROOM),at_t(TURN,player1,ROOM),at_t(TURN,TARGET,ROOM),movable(THING),in_t(TURN,THING,inventory),container(TARGET),open_t(TURN,TARGET),openable(TARGET);
action_t(TURN,put,THING,TARGET):at_t(TURN,THING,ROOM),at_t(TURN,player1,ROOM),at_t(TURN,TARGET,ROOM),movable(THING),in_t(TURN,THING,inventory),container(TARGET),not openable(TARGET);
action_t(TURN,put,THING,TARGET):at_t(TURN,THING,ROOM),at_t(TURN,player1,ROOM),at_t(TURN,TARGET,ROOM),movable(THING),in_t(TURN,THING,inventory),support(TARGET) } 1 :- turn(TURN), at_t(TURN,player1,ROOM), not turn_limit(TURN).
in_t(TURN+1,THING,TARGET) :- turn(TURN), action_t(TURN,put,THING,TARGET), container(TARGET).
on_t(TURN+1,THING,TARGET) :- turn(TURN), action_t(TURN,put,THING,TARGET), support(TARGET).
in_t(TURN+1,THING,inventory) :- turn(TURN), in_t(TURN,THING,inventory), not action_t(TURN,put,THING,_).

{ action_t(TURN,go,TARGET):exit(ROOM,TARGET) } 1 :- turn(TURN), at_t(TURN,player1,ROOM), not turn_limit(TURN).
at_t(TURN+1,player1,TARGET) :- action_t(TURN,go,TARGET).
at_t(TURN+1,player1,ROOM) :- turn(TURN), at_t(TURN,player1,ROOM), not action_t(TURN,go,_).
at_t(TURN+1,THING,TARGET) :- action_t(TURN,go,TARGET), in_t(TURN,THING,inventory).
at_t(TURN+1,THING,ROOM) :- turn(TURN), at_t(TURN,THING,ROOM), not in_t(TURN,THING,inventory), not turn_limit(TURN), THING != player1.

% { action_t(TURN,dump,THING,TARGET):at_t(TURN,THING,ROOM),at_t(TURN,player1,ROOM),at_t(TURN,TARGET,ROOM),bucket(THING),container(TARGET) } 1 :- turn(TURN), at_t(TURN,player1,ROOM), not turn_limit(TURN).
{ action_t(TURN,dump,THING,cauldron1):at_t(TURN,THING,ROOM),at_t(TURN,player1,ROOM),at_t(TURN,cauldron1,ROOM),bucket(THING) } 1 :- turn(TURN), at_t(TURN,player1,ROOM), not turn_limit(TURN).
% at_t(TURN+1,water1,ROOM) :- turn(TURN), action_t(TURN,dump,THING,TARGET), at_t(TURN,player1,ROOM), type(THING,waterbucket), container(TARGET).
at_t(TURN+1,water1,ROOM) :- turn(TURN), action_t(TURN,dump,THING,cauldron1), at_t(TURN,player1,ROOM), type(THING,waterbucket).
% at_t(TURN+1,ectoplasm1,ROOM) :- turn(TURN), action_t(TURN,dump,THING,TARGET), at_t(TURN,player1,ROOM), type(THING,plasmbucket), container(TARGET).
at_t(TURN+1,ectoplasm1,ROOM) :- turn(TURN), action_t(TURN,dump,THING,cauldron1), at_t(TURN,player1,ROOM), type(THING,plasmbucket).
at_t(TURN+1,water1,ROOM) :- turn(TURN), at_t(TURN,water1,ROOM).
at_t(TURN+1,ectoplasm1,ROOM) :- turn(TURN), at_t(TURN,ectoplasm1,ROOM).
% in_t(TURN+1,water1,TARGET) :- turn(TURN), action_t(TURN,dump,THING,TARGET), type(THING,waterbucket), container(TARGET).
in_t(TURN+1,water1,cauldron1) :- turn(TURN), action_t(TURN,dump,THING,cauldron1), type(THING,waterbucket).
% in_t(TURN+1,ectoplasm1,TARGET) :- turn(TURN), action_t(TURN,dump,THING,TARGET), type(THING,plasmbucket), container(TARGET).
in_t(TURN+1,ectoplasm1,cauldron1) :- turn(TURN), action_t(TURN,dump,THING,cauldron1), type(THING,plasmbucket).
% in_t(TURN+1,water1,CONTAINER) :- turn(TURN), in_t(TURN,water1,CONTAINER), container(CONTAINER).
in_t(TURN+1,water1,cauldron1) :- turn(TURN), in_t(TURN,water1,cauldron1).
% in_t(TURN+1,ectoplasm1,CONTAINER) :- turn(TURN), in_t(TURN,ectoplams1,CONTAINER), container(CONTAINER).
in_t(TURN+1,ectoplasm1,cauldron1) :- turn(TURN), in_t(TURN,ectoplams1,cauldron1).

% { action_t(TURN,wave,THING,WAND):at_t(TURN,THING,ROOM),at_t(TURN,WAND,ROOM),THING=cauldron1 } 1 :- turn(TURN), at_t(TURN,player1,ROOM), not turn_limit(TURN).
{ action_t(TURN,wave,cauldron1,WAND):at_t(TURN,cauldron1,ROOM),at_t(TURN,WAND,ROOM) } 1 :- turn(TURN), at_t(TURN,player1,ROOM), not turn_limit(TURN).
% hot_t(TURN+1,THING) :- action_t(TURN,wave,THING,WAND), type(WAND,firewand).
hot_t(TURN+1,cauldron1) :- action_t(TURN,wave,cauldron1,WAND), type(WAND,firewand).
% cold_t(TURN+1,THING) :- action_t(TURN,wave,THING,WAND), type(WAND,icewand).
cold_t(TURN+1,cauldron1) :- action_t(TURN,wave,cauldron1,WAND), type(WAND,icewand).
% glittery_t(TURN+1,THING) :- action_t(TURN,wave,THING,WAND), type(WAND,fairywand).
glittery_t(TURN+1,cauldron1) :- action_t(TURN,wave,cauldron1,WAND), type(WAND,fairywand).
% zulponated_t(TURN+1,THING) :- action_t(TURN,wave,THING,WAND), type(WAND,zulpowand).
zulponated_t(TURN+1,cauldron1) :- action_t(TURN,wave,cauldron1,WAND), type(WAND,zulpowand).
% hot_t(TURN+1,THING) :- turn(TURN), hot_t(TURN,THING), not action_t(TURN,wave,THING,WAND), type(WAND,icewand).
hot_t(TURN+1,cauldron1) :- turn(TURN), hot_t(TURN,cauldron1), not action_t(TURN,wave,cauldron1,WAND), type(WAND,icewand).
% cold_t(TURN+1,THING) :- turn(TURN), cold_t(TURN,THING), not action_t(TURN,wave,THING,WAND), type(WAND,firewand).
cold_t(TURN+1,cauldron1) :- turn(TURN), cold_t(TURN,cauldron1), not action_t(TURN,wave,cauldron1,WAND), type(WAND,firewand).
% glittery_t(TURN+1,THING) :- turn(TURN), glittery_t(TURN,THING).
glittery_t(TURN+1,cauldron1) :- turn(TURN), glittery_t(TURN,cauldron1).
% zulponated_t(TURN+1,THING) :- turn(TURN), zulponated_t(TURN,THING).
zulponated_t(TURN+1,cauldron1) :- turn(TURN), zulponated_t(TURN,cauldron1).

% { action_t(TURN,stir,THING,STIRRER):at_t(TURN,THING,ROOM),at_t(TURN,STIRRER,ROOM) } 1 :- turn(TURN), at_t(TURN,player1,ROOM), not turn_limit(TURN).
{ action_t(TURN,stir,THING,STIRRER):at_t(TURN,THING,ROOM),at_t(TURN,STIRRER,ROOM),in_t(TURN,THING,cauldron1) } 1 :- turn(TURN), at_t(TURN,player1,ROOM), not turn_limit(TURN).
ladlestirred_t(TURN+1,THING) :- action_t(TURN,stir,THING,STIRRER), type(STIRRER,ladle).
whisked_t(TURN+1,THING) :- action_t(TURN,stir,THING,STIRRER), type(STIRRER,whisk).
spoonstirred_t(TURN+1,THING) :- action_t(TURN,stir,THING,STIRRER), type(STIRRER,spoon).
borpulusstirred_t(TURN+1,THING) :- action_t(TURN,stir,THING,STIRRER), type(STIRRER,borpulus).
ladlestirred_t(TURN+1,THING) :- turn(TURN), ladlestirred_t(TURN,THING), not action_t(TURN,stir,THING,STIRRER), type(STIRRER,whisk).
ladlestirred_t(TURN+1,THING) :- turn(TURN), ladlestirred_t(TURN,THING), not action_t(TURN,stir,THING,STIRRER), type(STIRRER,spoon).
ladlestirred_t(TURN+1,THING) :- turn(TURN), ladlestirred_t(TURN,THING), not action_t(TURN,stir,THING,STIRRER), type(STIRRER,borpulus).
whisked_t(TURN+1,THING) :- turn(TURN), whisked_t(TURN,THING), not action_t(TURN,stir,THING,STIRRER), type(STIRRER,ladle).
whisked_t(TURN+1,THING) :- turn(TURN), whisked_t(TURN,THING), not action_t(TURN,stir,THING,STIRRER), type(STIRRER,spoon).
whisked_t(TURN+1,THING) :- turn(TURN), whisked_t(TURN,THING), not action_t(TURN,stir,THING,STIRRER), type(STIRRER,borpulus).
spoonstirred_t(TURN+1,THING) :- turn(TURN), spoonstirred_t(TURN,THING), not action_t(TURN,stir,THING,STIRRER), type(STIRRER,ladle).
spoonstirred_t(TURN+1,THING) :- turn(TURN), spoonstirred_t(TURN,THING), not action_t(TURN,stir,THING,STIRRER), type(STIRRER,spoon).
spoonstirred_t(TURN+1,THING) :- turn(TURN), spoonstirred_t(TURN,THING), not action_t(TURN,stir,THING,STIRRER), type(STIRRER,whisk).
borpulusstirred_t(TURN+1,THING) :- turn(TURN), borpulusstirred_t(TURN,THING), not action_t(TURN,stir,THING,STIRRER), type(STIRRER,ladle).
borpulusstirred_t(TURN+1,THING) :- turn(TURN), borpulusstirred_t(TURN,THING), not action_t(TURN,stir,THING,STIRRER), type(STIRRER,spoon).
borpulusstirred_t(TURN+1,THING) :- turn(TURN), borpulusstirred_t(TURN,THING), not action_t(TURN,stir,THING,STIRRER), type(STIRRER,whisk).

:- { action_t(TURN,_,_);action_t(TURN,_,_,_) } > 1, turn(TURN).
:- { action_t(TURN,_,_);action_t(TURN,_,_,_) } = 0, turn(TURN).

:- post_turn(POST), not at_t(POST,potion1,kitchen1).

% works now: !!!
% :- post_turn(POST), not at_t(POST,potion1,_).
% :- not at_t(_,potion1,_).


% :- not at_t(_,borpulus1,kitchen1).
% :- not in_t(_,water1,cauldron1).
% :- not action_t(_,stir,_,_).
% :- not action_t(_,stir,water1,_).
% :- not action_t(_,stir,water1,borpulus1).
% :- not borpulusstirred_t(_,water1).

% :- not event_t(_,potion_step_1,_).

% :- not testing(_).
% :- not at_t(_,liquid1,_).
% :- not in_t(_,liquid1,cauldron1).

% :- not in_t(_,eyeofnewt1,cauldron1).

% :- not action_t(_,put,_,cauldron1).

% :- not event_t(TURN,EVENT,ROOM).
% :- not event_t(_,_,_).
% :- { event_t(_,_,_)} 4.

% :- not event_t(_,potion_step_2,_).

% :- not type(liquid2,liquid).
% :- not at_t(_,liquid2,_).
% :- not in_t(_,liquid2,_).
% :- not in_t(_,liquid2,cauldron1).

%**%
% :- not action_t(_,wave,_,_).
% :- not zulponated_t(_,cauldron1).


% :- not event_t(_,potion_step_3,_).



#minimize{1,X:turn(X)}.

#show action_t/3.
#show action_t/4.

#show event_t/3.
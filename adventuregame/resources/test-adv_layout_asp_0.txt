room(kitchen1,kitchen).
type(kitchen1floor1,floor).
at(kitchen1floor1,kitchen1).
support(kitchen1floor1).
1 { exit(ROOM,TARGET):room(ROOM,kitchen),room(TARGET,pantry);exit(ROOM,TARGET):room(ROOM,kitchen),room(TARGET,hallway);exit(ROOM,TARGET):room(ROOM,kitchen),room(TARGET,garden);exit(ROOM,TARGET):room(ROOM,kitchen),room(TARGET,conservatory) } 3.
room(pantry1,pantry).
type(pantry1floor1,floor).
at(pantry1floor1,pantry1).
support(pantry1floor1).
1 { exit(ROOM,TARGET):room(ROOM,pantry),room(TARGET,kitchen);exit(ROOM,TARGET):room(ROOM,pantry),room(TARGET,hallway) } 1.
room(hallway1,hallway).
type(hallway1floor1,floor).
at(hallway1floor1,hallway1).
support(hallway1floor1).
1 { exit(ROOM,TARGET):room(ROOM,hallway),room(TARGET,kitchen);exit(ROOM,TARGET):room(ROOM,hallway),room(TARGET,pantry);exit(ROOM,TARGET):room(ROOM,hallway),room(TARGET,readingroom);exit(ROOM,TARGET):room(ROOM,hallway),room(TARGET,broomcloset);exit(ROOM,TARGET):room(ROOM,hallway),room(TARGET,conservatory);exit(ROOM,TARGET):room(ROOM,hallway),room(TARGET,garden);exit(ROOM,TARGET):room(ROOM,hallway),room(TARGET,storage) } 4.
room(broomcloset1,broomcloset).
type(broomcloset1floor1,floor).
at(broomcloset1floor1,broomcloset1).
support(broomcloset1floor1).
1 { exit(ROOM,TARGET):room(ROOM,broomcloset),room(TARGET,hallway) } 1.
room(bedroom1,bedroom).
type(bedroom1floor1,floor).
at(bedroom1floor1,bedroom1).
support(bedroom1floor1).
1 { exit(ROOM,TARGET):room(ROOM,bedroom),room(TARGET,readingroom);exit(ROOM,TARGET):room(ROOM,bedroom),room(TARGET,hallway);exit(ROOM,TARGET):room(ROOM,bedroom),room(TARGET,garden) } 1.
room(storage1,storage).
type(storage1floor1,floor).
at(storage1floor1,storage1).
support(storage1floor1).
1 { exit(ROOM,TARGET):room(ROOM,storage),room(TARGET,readingroom);exit(ROOM,TARGET):room(ROOM,storage),room(TARGET,hallway);exit(ROOM,TARGET):room(ROOM,storage),room(TARGET,kitchen);exit(ROOM,TARGET):room(ROOM,storage),room(TARGET,cellar);exit(ROOM,TARGET):room(ROOM,storage),room(TARGET,conservatory) } 2.
room(readingroom1,readingroom).
type(readingroom1floor1,floor).
at(readingroom1floor1,readingroom1).
support(readingroom1floor1).
1 { exit(ROOM,TARGET):room(ROOM,readingroom),room(TARGET,hallway);exit(ROOM,TARGET):room(ROOM,readingroom),room(TARGET,kitchen);exit(ROOM,TARGET):room(ROOM,readingroom),room(TARGET,bedroom);exit(ROOM,TARGET):room(ROOM,readingroom),room(TARGET,conservatory);exit(ROOM,TARGET):room(ROOM,readingroom),room(TARGET,garden) } 2.
room(workshop1,workshop).
type(workshop1floor1,floor).
at(workshop1floor1,workshop1).
support(workshop1floor1).
type(workshop1ceiling1,ceiling).
at(workshop1ceiling1,workshop1).
support(workshop1ceiling1).
1 { exit(ROOM,TARGET):room(ROOM,workshop),room(TARGET,hallway);exit(ROOM,TARGET):room(ROOM,workshop),room(TARGET,kitchen);exit(ROOM,TARGET):room(ROOM,workshop),room(TARGET,bedroom);exit(ROOM,TARGET):room(ROOM,workshop),room(TARGET,readingroom);exit(ROOM,TARGET):room(ROOM,workshop),room(TARGET,conservatory);exit(ROOM,TARGET):room(ROOM,workshop),room(TARGET,garden) } 2.
room(cellar1,cellar).
type(cellar1floor1,floor).
at(cellar1floor1,cellar1).
support(cellar1floor1).
1 { exit(ROOM,TARGET):room(ROOM,cellar),room(TARGET,hallway);exit(ROOM,TARGET):room(ROOM,cellar),room(TARGET,storage) } 2.
room(conservatory1,conservatory).
type(conservatory1floor1,floor).
at(conservatory1floor1,conservatory1).
support(conservatory1floor1).
1 { exit(ROOM,TARGET):room(ROOM,conservatory),room(TARGET,hallway);exit(ROOM,TARGET):room(ROOM,conservatory),room(TARGET,storage);exit(ROOM,TARGET):room(ROOM,conservatory),room(TARGET,garden) } 3.
room(garden1,garden).
type(garden1floor1,floor).
at(garden1floor1,garden1).
support(garden1floor1).
1 { exit(ROOM,TARGET):room(ROOM,garden),room(TARGET,hallway);exit(ROOM,TARGET):room(ROOM,garden),room(TARGET,storage);exit(ROOM,TARGET):room(ROOM,garden),room(TARGET,conservatory);exit(ROOM,TARGET):room(ROOM,garden),room(TARGET,outhouse) } 2.
room(outhouse1,outhouse).
type(outhouse1floor1,floor).
at(outhouse1floor1,outhouse1).
support(outhouse1floor1).
1 { exit(ROOM,TARGET):room(ROOM,outhouse),room(TARGET,garden) } 1.

reachable(ROOM,TARGET) :- exit(ROOM,TARGET).

% reachable(ROOM,TARGET) :- reachable(TARGET,ROOM).
reachable(ROOM,TARGET) :- reachable(ROOM,TARGET1), reachable(TARGET1,TARGET), ROOM != TARGET.

% not_reachable(ROOM) :- not reachable(ROOM,TARGET), room(ROOM,_), room(TARGET,_).

not_reachable(ROOM,TARGET) :- room(ROOM,_), room(TARGET,_), ROOM != TARGET, not reachable(ROOM,TARGET).

% :- room(ROOM,_), room(TARGET,_), ROOM != TARGET, not reachable(ROOM,TARGET).

#show not_reachable/2.
% #show reachable/2.